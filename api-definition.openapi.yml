openapi: 3.0.3
info:
  title: BarManager
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0 
security:
  - NONE: []    
servers:
  - url: https://localhost:8080
paths:
  /bars/{bar-id}:
    get:
      tags:
        - Login
      summary: get bar with given id
      operationId: getBar
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar id and name
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_basic_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
  /bars/bar:
    post:
      tags:
        - Login
      summary: login
      operationId: postBar
      requestBody:
        description: bar body
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/bar'
      responses:
        '200':
          description: bar id and name
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_basic_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'            
  /bars/{bar-id}/cocktails:
    get:
      tags:
        - Dashboard
        - Cocktails
      summary: get bar with given id
      operationId: geCocktails
      parameters:
        - in: query
          name: check-if-available
          schema:
            type: boolean
            default: false
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'

                  
  /bars/{bar-id}/orders:
    get:
      tags:
        - Orders
      summary: get orders from a bar
      operationId: getOrders
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem' 
  
  /bars/{bar-id}/orders/{order-id}:
    delete:
      tags:
        - Orders
      summary: delete Order from a bar
      operationId: deleteOrder
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: order-id
          required: true
          schema:
            type: integer
        - in: query
          name: check-if-available
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem' 
  
  /bars/{bar-id}/orders/order:
    post:
      tags:
        - Dashboard
        - Orders
      summary: Add Order to orders of a bar
      operationId: postOrder
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'             
  /bars/{bar-id}/cocktails/{cocktail-id}:
    get:
      tags:
        - Cocktails
        - Dashboard
      summary: get cocktail with more information from a specific bar
      operationId: getCocktail
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: cocktail-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
    put:
      tags:
        - Cocktails
      summary: Update a cocktail in a specific bar
      operationId: putCocktail
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: cocktail-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'     
    delete:
      tags:
        - Cocktails
      summary: Delete a Cocktail from a specific bar 
      operationId: deleteCocktail
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: cocktail-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'          
  /bars/{bar-id}/cocktails/cocktail:
   post:
      tags:
        - Cocktails
      summary: Add a cocktail to a specific bar
      operationId: postCocktail
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: bar 
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/bar_response'
        '404':
           description: Not Found
           content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem' 
        
  /bar/{bar-id}/ingredients:
    get:
      tags:
        - Ingredients
      summary: Get all ingredients of a specific bar
      operationId: getIngredients
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
            description: Not Found
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
  /bar/{bar-id}/ingredient-groups/{ingredient-id}:
    get:
      tags:
        - Ingredients
      summary: Get a specific ingredients of a specific bar
      operationId: getIngredient
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
            description: Not Found
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
    put:
      tags:
        - Ingredients
      summary: Update ingredient of a specific bar
      operationId: putIngredient
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
    delete:
      tags:
        - Ingredients
      summary: delete ingredient of a specific bar
      operationId: deleteIngredient
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
  /bar/{bar-id}/ingredient-groups/ingredient:
    post:
      tags:
        - Ingredients
      summary: add ingrdient to a specific bar
      operationId:  postIngredient
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
            description: Not Found
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
  /bar/{bar-id}/ingredient-groups:
      get:
        tags:
          - IngredientGroups
        summary: Get all ingredient-groups of a specific bar
        operationId: getIngredientGroups
        parameters:
          - in: path
            name: bar-id
            description: Unique id to identify bar
            required: true
            schema:
              type: integer
        responses:
          '200':
            description: Ingredients retrived
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ingredients_response'
          '404':
              description: Not Found
              content:
                application/problem+json:
                  schema:
                    $ref: '#/components/schemas/problem'
          '500':
            description: Internal Server Error
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
  /bar/{bar-id}/ingredient-groups/{ingredient-group-id}:
    get:
      tags:
        - IngredientGroups
      summary: Get a specific ingredient-group of a specific bar
      operationId: getIngredientGroup
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-group-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
            description: Not Found
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
    put:
      tags:
        - IngredientGroups
      summary: Update ingredient-group of a specific bar
      operationId: putIngredientGroup
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
    delete:
      tags:
        - IngredientGroups
      summary: delete ingredient-group of a specific bar
      operationId: deleteIngredientGroup
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
        - in: path
          name: ingredient-id
          description: Unique id to identify the ingredient
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
  /bar/{bar-id}/ingredient-groups/ingredient-group:
    post:
      tags:
        - IngredientGroups
      summary: add ingredient-group to a specific bar
      operationId:  postIngredientGroup
      parameters:
        - in: path
          name: bar-id
          description: Unique id to identify bar
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ingredients retrived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ingredients_response'
        '404':
            description: Not Found
            content:
              application/problem+json:
                schema:
                  $ref: '#/components/schemas/problem'
components:
  securitySchemes:
    NONE:
      type: apiKey
      name: key
      in: cookie 
      
  schemas:
    bar:
      type: object
      required:
        - id
        - name
        - owner
        - barCode
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Toms coole Bar
        owner:
          $ref: '#/components/schemas/owner'
        barCode:
          type: string
          minLength: 6
          maxLength: 6
        availableCocktails:
          type: array
          items:
            $ref: '#/components/schemas/cocktails'
    owner:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Tom fucking Schmanke
    cocktails:
      type: object
      required:
        - id
        - name
        - ingredients
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Awesome mega Cocktail
        ingredients:
          type: array
          items:
            $ref: '#/components/schemas/ingredientGroup'
    ingredientGroup:
      type: object
      required:
        - id
        - name
        - unitOfMeasurement
        - ingredients
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Gin de Cologne
        unitOfMeasurement:
          $ref: '#/components/schemas/unitOfMeasurement'
        ingredients:
          type: array
          items:
            $ref: '#/components/schemas/ingredient'
    ingredient:
      type: object
      required:
        - id
        - name
        - amount
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Awesome mega ingredient
        amount:
          type: integer
          format: int64
          example: 500
        description:
          type: string
          example: Cola mit iceee
    unitOfMeasurement:
      type: string
      example: ml
      enum:
        - ML
        - G
        - PIECE
    problem:
      type: object
      properties:
        type: 
          type: string
          format: uri
          description: ahahhahahahahah
    ingredients_response:
      type: array
      items:
        $ref: '#/components/schemas/ingredientGroup'
    bar_basic_response:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Toms awesome Bar
    bar_response:
      type: array
      items: 
        $ref: '#/components/schemas/cocktails'
     
